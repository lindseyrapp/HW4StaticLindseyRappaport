---
import { getCollection } from 'astro:content';

// Get all posts from the 'blog' collection
const posts = await getCollection('blog');

// Generate paths for each post (this is required for dynamic pages)
export async function getStaticPaths() {
    return posts.map((post) => ({
        params: { slug: post.slug }, 
        props: { post }
    }));
}

// Pull the correct post for this page
const { post } = Astro.props;
---

<!doctype html>
<html lang="en">
<head>
    <title>{post.data.title}</title>
</head>
<body>
    <article>
        <h1>{post.data.title}</h1>
        <p><small>Published on {post.data.pubDate.toLocaleDateString()}</small></p>
        <section>
            {post.body}
        </section>
    </article>
</body>
</html>

